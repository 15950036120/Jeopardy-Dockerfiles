# SniperOJ Basic Image
FROM ubuntu:16.04
MAINTAINER Yihang Wang "wangyihanger@gmai.com"

# update and install ssh 
RUN apt-get update -y && apt-get install openssh-server -y

# set timezone
ENV TZ=Asia/Shanghai
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# set chinese support
ENV LANG zh_CN.UTF-8  
ENV LANGUAGE zh_CN:zh  
ENV LC_ALL zh_CN.UTF-8  

# create run.sh
RUN touch /run.sh \
	&& echo '#!/bin/sh' >> /run.sh \
	&& echo '' >> run.sh \
	&& echo 'service ssh start' >> run.sh \
	&& echo '' >> run.sh \
	&& echo '/bin/bash' >> run.sh \
	&& chmod +x /run.sh

# add new user
RUN useradd -d /home/sniper/ -m -p sniper -s /bin/bash sniper

# change password
RUN echo "root:password" | chpasswd
RUN echo "sniper:password" | chpasswd

# run shell
CMD ["/run.sh"]
