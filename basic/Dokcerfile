# Basic Image of Challenges on SniperOJ 
FROM ubuntu:16.04
MAINTAINER Yihang Wang "wangyihanger@gmai.com"

# update & upgrade & clean
RUN apt-get update -y \
	&& apt upgrade -y \
	&& apt dist-upgrade -y \
	&& apt clean -y \
	&& apt autoclean -y \
	&& apt remote -y \
	&& apt autoremote -y

# set timezone
ENV TZ=Asia/Shanghai
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# set chinese support
ENV LANG zh_CN.UTF-8  
ENV LANGUAGE zh_CN:zh  
ENV LC_ALL zh_CN.UTF-8  

# create run.sh
RUN touch /run.sh \
	&& echo '#!/bin/sh' >> /run.sh \
	&& echo '' >> run.sh \
	&& echo 'service ssh start' >> run.sh \
	&& echo '' >> run.sh \
	&& echo '/bin/bash' >> run.sh \
	&& chmod +x /run.sh

# add new user
RUN useradd -d /home/ctf/ -m -p sniper -s /bin/bash ctf

# change password
RUN echo "ctf:ctf" | chpasswd

# run shell
CMD ["/run.sh"]
